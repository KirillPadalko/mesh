# üöÄ –°–±–æ—Ä–∫–∞ Release APK - Mesh Client v0.2.0

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
- ‚úÖ Keystore: `app/release.jks` (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚úÖ Keystore properties: `app/keystore.properties` (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚úÖ Version Code: **3**
- ‚úÖ Version Name: **0.2.0**
- ‚úÖ Signing Config: –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `build.gradle.kts`
- ‚úÖ ProGuard: –≤–∫–ª—é—á–µ–Ω (minify + shrinkResources)

---

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –±–∏–ª–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```powershell
.\gradlew.bat clean
```
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~10-30 —Å–µ–∫—É–Ω–¥

---

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ Release APK
```powershell
.\gradlew.bat assembleRelease
```
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~2-5 –º–∏–Ω—É—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ—â–Ω–æ—Å—Ç–∏ –ü–ö)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è Kotlin –∫–æ–¥–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ Room database (KSP)
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ (ProGuard/R8)
- –°–∂–∞—Ç–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü–æ–¥–ø–∏—Å—ã–≤–∞–Ω–∏–µ APK —Å –ø–æ–º–æ—â—å—é release keystore

---

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –°–±–æ—Ä–∫–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞:
```powershell
.\gradlew.bat assembleRelease --info
```

–ò–ª–∏ —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
```powershell
.\gradlew.bat assembleRelease --warning-mode all
```

---

## üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ APK –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–¥–µ—Å—å:
```
app\build\outputs\apk\release\app-release.apk
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ:
- **–ò–º—è —Ñ–∞–π–ª–∞:** `app-release.apk`
- **–ü–æ–¥–ø–∏—Å–∞–Ω:** ‚úÖ –î–∞ (—Å –ø–æ–º–æ—â—å—é `release.jks`)
- **–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω:** ‚úÖ –î–∞ (ProGuard/R8)
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:** ‚úÖ –î–∞ (shrinkResources)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** armeabi-v7a, arm64-v8a
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä:** ~15-25 MB

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ APK

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å APK:
```powershell
& "C:\Program Files\Java\jdk-1.8\bin\jarsigner.exe" -verify -verbose -certs app\build\outputs\apk\release\app-release.apk
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–æ: **"jar verified."**

---

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ APK:
```powershell
.\gradlew.bat :app:assembleRelease --dry-run
```

---

### –ü–æ–ª—É—á–∏—Ç—å SHA256 fingerprint (–¥–ª—è assetlinks.json):
```powershell
& "C:\Program Files\Java\jdk-1.8\bin\keytool.exe" -list -v -keystore app\release.jks -alias mesh_key -storepass mesh123456 | Select-String "SHA256"
```

–≠—Ç–æ—Ç fingerprint –Ω—É–∂–µ–Ω –¥–ª—è —Ñ–∞–π–ª–∞ `.well-known/assetlinks.json` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

---

## üì§ –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ APK

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª `app-release.apk` –¥—Ä—É–∑—å—è–º —á–µ—Ä–µ–∑:
- Telegram
- WhatsApp
- Email
- Google Drive / Dropbox

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Android –ø–æ–ø—Ä–æ—Å–∏—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Hosting –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
```
https://mesh-online.org/downloads/mesh-client-v0.2.0.apk
```

–°–æ–∑–¥–∞–π—Ç–µ download —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∫–Ω–æ–ø–∫–æ–π "Download APK"

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Google Play Store (–±—É–¥—É—â–µ–µ)
–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Play Store –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:
1. –°–æ–∑–¥–∞—Ç—å APK Bundle (`.aab`):
   ```powershell
   .\gradlew.bat bundleRelease
   ```
   –†–µ–∑—É–ª—å—Ç–∞—Ç: `app\build\outputs\bundle\release\app-release.aab`

2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Developer Account ($25 one-time fee)
3. –°–æ–∑–¥–∞—Ç—å listing –≤ Play Console
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å `.aab` —Ñ–∞–π–ª

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Keystore
üîê **Keystore —Ñ–∞–π–ª (`release.jks`) - —ç—Ç–æ –∫–ª—é—á –∫ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é!**

- ‚úÖ –°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git (—É–∂–µ –≤ `.gitignore`)
- ‚úÖ –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å –ø–∞—Ä–æ–ª–µ–º `mesh123456` –ø—É–±–ª–∏—á–Ω–æ
- ‚ö†Ô∏è –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ keystore, –Ω–µ —Å–º–æ–∂–µ—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Play Store!

**–°–æ–∑–¥–∞–π—Ç–µ backup:**
```powershell
Copy-Item app\release.jks -Destination D:\BACKUPS\mesh-release.jks
Copy-Item app\keystore.properties -Destination D:\BACKUPS\keystore.properties
```

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:**
   ```powershell
   adb install app\build\outputs\apk\release\app-release.apk
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ identity
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ Share invite (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å https://mesh-online.org)
   - ‚úÖ Deep link (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ invite —Å—Å—ã–ª–∫—É)
   - ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏ L2
   - ‚úÖ MeshScore –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```powershell
   adb logcat | Select-String "Mesh"
   ```

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `.\gradlew.bat clean`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `.\gradlew.bat assembleRelease`
- [ ] –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ (–±–µ–∑ –æ—à–∏–±–æ–∫)
- [ ] APK —Å–æ–∑–¥–∞–Ω: `app\build\outputs\apk\release\app-release.apk`
- [ ] APK –ø–æ–¥–ø–∏—Å–∞–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ jarsigner)
- [ ] APK —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è keystore
- [ ] APK –≥–æ—Ç–æ–≤ –∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é ‚úÖ

---

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ v0.2.0

–°–º. –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–∞–π–ª–µ `CHANGELOG.md`

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- Event-driven architecture –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ UI
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ L2 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Migration –Ω–∞ https://mesh-online.org
- Secure WebSocket (WSS) –≤–º–µ—Å—Ç–æ WS
- Android App Links –¥–ª—è invite —Å—Å—ã–ª–æ–∫

---

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "Cannot find keystore"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
- `app/release.jks`
- `app/keystore.properties`

### –û—à–∏–±–∫–∞: "Invalid keystore format"
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ keystore (—Å–º. `.agent/workflows/build_release_apk.md`)

### –û—à–∏–±–∫–∞: R8/ProGuard warnings
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `app/proguard-rules.pro` –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ minification

### APK —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (>50MB)
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `isShrinkResources = true` –≤ build.gradle.kts

### –°–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ heap memory –¥–ª—è Gradle –≤ `gradle.properties`:
```properties
org.gradle.jvmargs=-Xmx4096m -XX:MaxPermSize=512m
```

---

**–£–¥–∞—á–Ω–æ–π —Å–±–æ—Ä–∫–∏! üöÄ**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue.
